(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/customer/visitCustomer"],{"0360":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=(e._self._c,s("1e62")),o=s("2e74"),n=s("1e62");e._isMounted||(e.e0=function(t){e.isLaberbox=!0}),e.$mp.data=Object.assign({},{$root:{m0:a,m1:o,m2:n}})},o=[];s.d(t,"a",function(){return a}),s.d(t,"b",function(){return o})},"1b91":function(e,t,s){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s("f97e"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r=o.default.env.platform,u={data:function(){var e=["婚宴信息","婚庆信息","一站式"],t=[{title:"无"}],s=[{shortname:"无"}],a=[{shortname:"无"}];return{customer:{},logs:{},group:{},groupLength:0,isLaberbox:!1,newsType:0,newsTypes:e,source_index:0,sources:t,recommender:"",banquet_size:"",budget:"",wedding_date:"",hotel_text:"",city_index:0,cities:s,area_index:0,areas:a,zone:"",realname:""}},onLoad:function(e){this.getCustomerVisits(e.member_id),this.getBaseData()},onShow:function(){"notInDingTalk"!=r&&o.default.ready(function(){o.default.biz.navigation.hideBar({hidden:!0,onSuccess:function(e){},onFail:function(e){}})})},methods:{getCustomerVisits:function(t){var s=this,o=s.$apis.visit.visitCustomer,n={member_id:t,token:this.$getToken()};e.request({url:o,method:"POST",data:n,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var o=t.data;if(console.log(a("结果是:",o.result.customer," at pages/customer/visitCustomer.vue:212")),"200"==o.code){for(var n in s.customer=o.result.customer,s.customer)null!==s.customer[n]?(console.log(a(s.customer[n],typeof s.customer[n]," at pages/customer/visitCustomer.vue:217")),s[n]=s.customer[n]):s[n]="";s.group=o.result.visits.count,s.logs=o.result.visits.log;var i=0;for(var r in s.group)i++;s.groupLength=i,s.banquet_sizes=o.result.scales,console.log(a(s.banquet_sizes," at pages/customer/visitCustomer.vue:234")),s.hotels=o.result.hotels}else e.showToast({title:result.msg})}})},bindChange:function(e){var t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},getBaseData:function(){var t=this,s=t.$apis.customer.getBaseData,a=this.$getToken(),o={token:a};e.request({url:s,method:"POST",data:o,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(s){var a=s.data;"0"==a.code?(t.newsTypes=a.data.news_types,t.sources=a.data.sources,t.cities=a.data.cities,t.city_index=a.data.city_index,t.areas=a.data.areas):e.showToast({title:a.msg})}})},boxFn:function(e){this.isLaberbox=!1},bianPhone:function(t){var s=this.customer.mobile;console.log(a(s," at pages/customer/visitCustomer.vue:289")),window.event.stopPropagation(),e.makePhoneCall({phoneNumber:s})},inputChange:function(e){var t=e.currentTarget.dataset.key,s=e.detail.value;this[t]=s},blurChange:function(e){var t=e.currentTarget.dataset.key,s=e.detail.value;this[t]=s,""!=s&&this.editCustomer(t,s)},newsTypeFn:function(e){var t=e.detail.value;this.newsType=t,this.newsTypeText=this.newsTypes[t]},bindDateChange:function(e){var t=e.detail.value;this.wedding_date=t},bindSourceChange:function(e){console.log(a("value is",e.detail.value," at pages/customer/visitCustomer.vue:319"));var t=e.detail.value;this["source_index"]=t},bindCityChange:function(e){console.log(a(e," at pages/customer/visitCustomer.vue:325"));var t=e.detail.value;this["city_index"]=t},bindAreaChange:function(e){var t=e.detail.value;this["area_index"]=t,console.log(a(this["areas"]," at pages/customer/visitCustomer.vue:334"));var s=this["areas"][t]["shortname"],o=this["zone"];if(""==o)o=s;else{var n=o.split(",");-1==n.indexOf(s)&&n.push(s),o=n.join()}this["zone"]=o},toVisitCustomer:function(t){var s=this;e.navigateTo({url:"doVisitCustomer?member_id="+s.customer.id+"&realname="+s.realname})},createOrder:function(t){e.navigateTo({url:"../order/createOrder?member_id="+this.customer.id})},editCustomer:function(t,s){var o=this,n=o.$apis.customer.editCustomer,r=this.$getToken(),u=i({token:r,id:o.customer.id},t,s);e.request({url:n,method:"POST",data:u,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var s=t.data;"0"==s.code?console.log(a(t," at pages/customer/visitCustomer.vue:380")):e.showToast({title:s.msg})}})}}};t.default=u}).call(this,s("6e42")["default"],s("0de9")["default"])},3195:function(e,t,s){"use strict";s.r(t);var a=s("0360"),o=s("8617");for(var n in o)"default"!==n&&function(e){s.d(t,e,function(){return o[e]})}(n);s("a262");var i=s("2877"),r=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},8617:function(e,t,s){"use strict";s.r(t);var a=s("1b91"),o=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);t["default"]=o.a},a262:function(e,t,s){"use strict";var a=s("b3b6"),o=s.n(a);o.a},b3b6:function(e,t,s){}},[["9373","common/runtime","common/vendor"]]]);