(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/customer/visitCustomer"],{"1d79":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=(e._self._c,a("9668")),o=a("5f12"),n=a("9668");e._isMounted||(e.e0=function(t){e.isLaberbox=!0}),e.$mp.data=Object.assign({},{$root:{m0:s,m1:o,m2:n}})},o=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o})},2803:function(e,t,a){"use strict";a.r(t);var s=a("1d79"),o=a("8a1a");for(var n in o)"default"!==n&&function(e){a.d(t,e,function(){return o[e]})}(n);a("9617");var i=a("2877"),r=Object(i["a"])(o["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},"5a65":function(e,t,a){},"683e":function(e,t,a){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("3ee9"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=o.default.env.platform,u={data:function(){var e=["婚宴信息","婚庆信息","一站式"],t=[{title:"无"}],a=[{shortname:"无"}],s=[{shortname:"无"}];return{customer:{},logs:{},group:{},groupLength:0,isLaberbox:!1,newsType:0,newsTypes:e,source_index:0,sources:t,recommender:"",banquet_size:"",budget:"",wedding_date:"",hotel_text:"",city_index:0,cities:a,area_index:0,areas:s,zone:"",realname:""}},onLoad:function(e){this.getCustomerVisits(e.member_id),this.getBaseData()},onShow:function(){"notInDingTalk"!=r&&o.default.ready(function(){o.default.biz.navigation.hideBar({hidden:!0,onSuccess:function(e){},onFail:function(e){}})})},methods:{getCustomerVisits:function(t){var a=this,o=a.$apis.visit.visitCustomer,n={member_id:t,token:this.$getToken()};e.request({url:o,method:"POST",data:n,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var o=t.data;if(console.log(s("结果是:",o.result.customer," at pages\\customer\\visitCustomer.vue:212")),"200"==o.code){for(var n in a.customer=o.result.customer,a.customer)null!==a.customer[n]?(console.log(s(a.customer[n],typeof a.customer[n]," at pages\\customer\\visitCustomer.vue:217")),a[n]=a.customer[n]):a[n]="";a.group=o.result.visits.count,a.logs=o.result.visits.log;var i=0;for(var r in a.group)i++;a.groupLength=i,a.banquet_sizes=o.result.scales,console.log(s(a.banquet_sizes," at pages\\customer\\visitCustomer.vue:234")),a.hotels=o.result.hotels}else e.showToast({title:result.msg})}})},bindChange:function(e){var t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},getBaseData:function(){var t=this,a=t.$apis.customer.getBaseData,s=this.$getToken(),o={token:s};e.request({url:a,method:"POST",data:o,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){var s=a.data;"0"==s.code?(t.newsTypes=s.data.news_types,t.sources=s.data.sources,t.cities=s.data.cities,t.city_index=s.data.city_index,t.areas=s.data.areas):e.showToast({title:s.msg})}})},boxFn:function(e){this.isLaberbox=!1},bianPhone:function(t){var a=this.customer.mobile;console.log(s(a," at pages\\customer\\visitCustomer.vue:289")),window.event.stopPropagation(),e.makePhoneCall({phoneNumber:a})},inputChange:function(e){var t=e.currentTarget.dataset.key,a=e.detail.value;this[t]=a},blurChange:function(e){var t=e.currentTarget.dataset.key,a=e.detail.value;this[t]=a,""!=a&&this.editCustomer(t,a)},newsTypeFn:function(e){var t=e.detail.value;this.newsType=t,this.newsTypeText=this.newsTypes[t]},bindDateChange:function(e){var t=e.detail.value;this.wedding_date=t},bindSourceChange:function(e){console.log(s("value is",e.detail.value," at pages\\customer\\visitCustomer.vue:319"));var t=e.detail.value;this["source_index"]=t},bindCityChange:function(e){console.log(s(e," at pages\\customer\\visitCustomer.vue:325"));var t=e.detail.value;this["city_index"]=t},bindAreaChange:function(e){var t=e.detail.value;this["area_index"]=t,console.log(s(this["areas"]," at pages\\customer\\visitCustomer.vue:334"));var a=this["areas"][t]["shortname"],o=this["zone"];if(""==o)o=a;else{var n=o.split(",");-1==n.indexOf(a)&&n.push(a),o=n.join()}this["zone"]=o},toVisitCustomer:function(t){var a=this;e.navigateTo({url:"doVisitCustomer?member_id="+a.customer.id+"&realname="+a.realname})},createOrder:function(t){e.navigateTo({url:"../order/createOrder?member_id="+this.customer.id})},editCustomer:function(t,a){var o=this,n=o.$apis.customer.editCustomer,r=this.$getToken(),u=i({token:r,id:o.customer.id},t,a);e.request({url:n,method:"POST",data:u,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var a=t.data;"0"==a.code?console.log(s(t," at pages\\customer\\visitCustomer.vue:380")):e.showToast({title:a.msg})}})}}};t.default=u}).call(this,a("6e42")["default"],a("0de9")["default"])},"8a1a":function(e,t,a){"use strict";a.r(t);var s=a("683e"),o=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);t["default"]=o.a},9617:function(e,t,a){"use strict";var s=a("5a65"),o=a.n(s);o.a}},[["0879","common/runtime","common/vendor"]]]);